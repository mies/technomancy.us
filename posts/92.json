{"timestamp": "Sat Oct 13 00: 00: 01 -0700 2007", "title": "hiker dot rb", "id": 92, "content": "<p>I <a href='/88'>mentioned before</a> that I have some code for\r\n  mapping geotagged photos on Google Maps. I've gotten a chance to\r\n  wrap that up and polish it for release. May I\r\n  present:  <tt>hiker.rb</tt>. Thanks to a tip from\r\n  an <a href='/88#c'>anonymous commenter</a> my code now creates\r\n  detail bubbles that include the photo rather than just a link to\r\n  it. You can\r\n  see <a href='http: //maps.google.com/?q=http: //hagelb.org/victoria2.kml'>a\r\n  couple</a> <a href='http: //maps.google.com/?q=http: //hagelb.org/edwards3.kml'>examples\r\n  of it</a>.\r\n</p>\r\n\r\n<p>Unfortunately the process of going from a set of photos and a GPS\r\n  tracks file to a KML file (which is what Google Maps reads) is\r\n  somewhat involved. First there's the fact that no mainstream GPS\r\n  manufacturer uses a sane format. You need a program\r\n  called <a href='http: //www.gpsbabel.org'>gpsbabel</a> to do the\r\n  conversion into\r\n  the <a href='http: //www.topografix.com/gpx.asp'>GPX</a> format. Say\r\n  you've got a saved GPS tracks from Magellan GPS that you took on your hike called myhike.log and\r\n  your photos from the hike in a directory called hike_photos.</p>\r\n\r\n<pre class='code'>\r\n$ gpsbabel -i magellan -o gpx myhike.log myhike.gpx\r\n</pre>\r\n\r\n<p>Once you've got the GPX file,  you can\r\n  use <a href='http: //freefoote.dview.net/linux_gpscorr.html'>gpscorrelate\r\n  </a>to write the coordinate metadata onto the photo files. This\r\n  program uses the GPX file to figure out where you were at a given\r\n  time and then for each photo makes a best guess that it writes to\r\n  the photo file.</p>\r\n\r\n<pre class='code'>\r\n$ gpscorrelate -g myhike.gpx hike_photos/*\r\n</pre>\r\n\r\n<p>The one caveat at this point is that often your GPS device and your\r\n  camera will be set to different time zones. If this is the case, \r\n  simply add a <tt>--timeadd +8</tt> to add 8 hours or adjust\r\n  accordingly.</p>\r\n\r\n<p>At this point you'll have to upload the photos to Flickr. Note that\r\n  if you've already got the photos in Flickr but they don't have the\r\n  coordinate metadata you'll have to re-upload them. Be sure they are\r\n  tagged with something unique; you'll use Flickr tags to tell\r\n  hiker.rb which to process. The last bit of setup you need is to sign\r\n  up for a <a href='http: //www.flickr.com/services/api/keys/apply/'>Flickr\r\n  API key</a>. Place the key in a file in <tt>~/.flickr_key</tt>.</p>\r\n\r\n<p>Now you're ready to run the script.</p>\r\n\r\n<pre class='code'>\r\n$ ruby hiker.rb myhiketag myusername > myhike.kml\r\n</pre>\r\n\r\n<p>So now you've got your shiny new hike KML file. Publish it to the\r\n  web and you'll be able to view it in Google Maps by appending its\r\n  URL to the Google Maps\r\n  URL:  <tt><a href='http: //maps.google.com/?q=http: //hagelb.org/edwards.kml'>http: //maps.google.com/?q=http: //example.com/myhike.kml</a></tt></p>\r\n\r\n<p>Grab <a href='http: //dev.technomancy.us/browser/hiker'>the code\r\n    from my repository</a>.</p>\r\n\r\n<pre class='code'>\r\n$ git svn clone svn: //dev.technomancy.us/hiker\r\n</pre>\r\n\r\n<p>Or if you're still doing the centralized VC thing: </p>\r\n\r\n<pre class='code'>\r\n$ svn co svn: //dev.technomancy.us/hiker\r\n</pre>\r\n\r\n<p>That's all! Future revisions may automate the tiresome work of\r\n  running <tt>gpsbabel</tt> and <tt>gpscorrelate</tt>,  but this is how\r\n  it works for now. Let me know if you run the script and have any\r\n  feedback; please leave a comment.</p>\r\n"}
