{"timestamp":"Fri Jul 20 08:17:54 -0700 2007","uri":"","post_id":87,"author":"Noah Slater","id":183,"content":"This example has two major errors.\r<br \/>\n\r<br \/>\nFirstly, you need to quote the argument to sed or you will get a &quot;sed: -e expression #1, char 21: unterminated `s' command&quot; error.\r<br \/>\n\r<br \/>\nSecondly, you cannot use sed to read from a while while concurrently writing to the same file. You need to use a temporary file in this instance.\r<br \/>\n\r<br \/>\nA working script would look something like:\r<br \/>\n\r<br \/>\ntemporary_file=$(tempfile)\r<br \/>\nif [ $? -ne 0 ]; then\r<br \/>\n    echo &quot;Could not create temporary file.&quot;;\r<br \/>\nelse\r<br \/>\n    sed &quot;s\/localhost\/localhost lolcathost\/&quot; \/etc\/hosts &gt; $temporary_file;\r<br \/>\n    mv $temporary_file \/etc\/hosts\r<br \/>\nfi"}
